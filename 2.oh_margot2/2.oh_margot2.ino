#include <VGAX.h>

//image generated from 2BITIMAGE - by Sandro Maffiodo
#define IMG_MARIOMASK_WIDTH 16
#define IMG_MARIOMASK_BWIDTH 4
#define IMG_MARIOMASK_HEIGHT 16
#define IMG_MARIOMASK_SPRITES_CNT 8
//data size=512 bytes
const unsigned char img_mariomask_data[IMG_MARIOMASK_SPRITES_CNT][IMG_MARIOMASK_HEIGHT][IMG_MARIOMASK_BWIDTH] PROGMEM={
{ { 255, 255, 255, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, { 252,   0,   3, 255, }, { 240,   0,   0, 255, }, { 240,   0,   0, 255, }, { 252,   0,   0, 255, }, { 252,   0,   3, 255, }, { 255,   0,   3, 255, }, { 255,   0,   3, 255, }, },
{ { 255, 255, 255, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, { 252,   0,   0,  63, }, { 252,   0,   0,  15, }, { 240,   0,   0,  15, }, { 240,   0,   0,  63, }, { 252,   0,   0,  63, }, { 252,   0,   0,  63, }, { 255,   3, 192, 255, }, },
{ { 255, 192,  15, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 252,   0,   0, 255, }, { 192,   0,   0,  63, }, {   0,   0,   0,  15, }, {   0,   0,   0,   3, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,  15, }, { 192,   3,   0,  63, }, { 240,   3, 192, 255, }, },
{ { 255, 192,   3, 255, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, },
{ { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 240,  15, 255, }, { 252,   0,   0,  63, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, },
{ { 255, 240,  15, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0, 255, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 240,   0,   0,   3, }, { 240,   0,   0,   3, }, { 252,  15, 192,  15, }, },
{ { 255, 240,  15, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0, 255, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 252,   0,   0, 255, }, { 240,   0,   0,  63, }, { 192,   0,   0,  15, }, { 192,   0,   0,  15, }, { 240,   3, 240,  63, }, }
};
//image generated from 2BITIMAGE - by Sandro Maffiodo
#define IMG_MARIO_WIDTH 16
#define IMG_MARIO_BWIDTH 4
#define IMG_MARIO_HEIGHT 16
#define IMG_MARIO_SPRITES_CNT 22
//data size=1408 bytes
const unsigned char img_mario_data[IMG_MARIO_SPRITES_CNT][IMG_MARIO_HEIGHT][IMG_MARIO_BWIDTH] PROGMEM={
{ 170, 170, 171, 255, 7, 191, 250, 191, 255, 250, 170, 171, 240, },
{   0,   0,   2, 255, 7, 255, 240,  15,  63, 192,   0,   0, 240, },
{   3, 255, 192, 254, 7, 255, 240,   0,  15, 130, 255, 224, 240, },
{  11, 235, 240, 252,  7, 255, 240, 176,   3,  11, 235, 224, 240, },
{  15,   0, 240, 255,  7,  47, 192, 252,  15,  15,   0,  32, 240, },
{   0,   0,   0, 255,  7,  15,   0, 240, 178,   0,   0,   0, 240, },
{  47, 255, 255, 246,   7,  10,   0, 240, 178, 255, 255, 251, 240, },
{ 191, 255, 255, 240,   7, 176, 128, 160,   2, 255, 255, 255, 240, },
{   2, 192, 242, 252,   7, 240, 240,   0,   2, 191, 255, 255, 240, },
{ 255,255,255,255,255,255,255,255,255,255,255,255,255, },
{ 255,255,255,255,255,255,255,255,255,255,255,255,255, },
{ 255,255,255,255,255,255,255,255,255,255,255,255,255, },
{ 255,255,255,255,255,255,255,255,255,255,255,255,255, },
{ 255,255,255,255,255,255,255,255,255,255,255,255,255, },
{  15,   0, 240, 255, 7, 252,   2,  15, 255, 255,   8,   0, 240, },
{  15, 255, 240, 240, 7,   0,   0, 242, 255, 207, 224,   0, 240, },
{  15, 255, 240, 224,  7,   0,   0, 240, 255, 139, 192,  63, 240, },
{   0,   0,   0, 242, 7,  15, 192, 255,  15, 128,   2, 255, 240, },
{   0,   0,   2, 255, 7,  47, 224, 255,  11, 192,   3, 255, 240, },
};
VGAX vga;

void setup() {
  vga.begin();
  vga.clear(11);
   pinMode(LED_BUILTIN, OUTPUT); // led
}
void loop() {
  static byte sidx=5;
  vga.blitwmask((byte*)(img_mario_data[sidx]), (byte*)(img_mariomask_data[sidx]), IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, rand()%VGAX_WIDTH-IMG_MARIO_WIDTH/500, rand()%VGAX_HEIGHT-IMG_MARIO_HEIGHT/1000);
  sidx=sidx==1 ? 500 : random(3,30);
  static unsigned cnt;
  if (!(cnt % 7))
    vga.noTone();
  if (!(cnt++%4))
    vga.tone(cnt*6+5500);
  if (cnt>=random(1,1000)*10) {
    cnt=0;
    vga.clear(0);digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(100);                       // wait for a second
  digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW
  delay(100);                       // wait for a second
    
  }
}
